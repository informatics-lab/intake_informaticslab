{% set data = load_setup_py_data() %}
{% set name = data.get('name') %}
{% set version = data.get('version') %}

package:
  name: "{{ name|lower }}"
  version: "{{ version }}"

source:
  path: .

build:
  noarch: python
  number: 0
  script: "$PYTHON -m pip install . --no-deps --ignore-installed -vv "

requirements:
  build:
    - pytest
    - "numpy>=1.11"
    - 'dask>=1.0'
    - 'xarray'
    - 'zarr>=2'
    - 'adlfs'
    - 'h5netcdf>=0.8'
    - 'adlfs'
    - 'intake'
  host:
    - python
    - pip
  run:
    - python
    - "numpy>=1.11"
    - 'dask>=1.0'
    - 'xarray'
    - 'zarr>=2'
    - 'adlfs'
    - 'h5netcdf>=0.8'
    - 'adlfs'
    - 'intake'

test:
  files:
    - "*"
  requires: 
    - pytest
  commands:
    - pytest

about:
  home: https://github.com/informatics-lab/met_office_datasets
  license: GPLv3
  license_family: GPL3
  license_file: LICENSE
  summary: SUMMARY

extra:
  recipe-maintainers:
    - theo.mccaie
